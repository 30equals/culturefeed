<?php

/**
 * @file
 * Module file for Culturefeed uitpas.
 */

require_once 'culturefeed_uitpas.blocks.inc';
require_once 'culturefeed_uitpas.forms.inc';
require_once 'culturefeed_uitpas.helpers.inc';
require_once 'culturefeed_uitpas.menu.inc';
require_once 'culturefeed_uitpas.theme.inc';

/**
 * Module implements hook_culturefeed_login_redirect_destination_alter().
 */
function culturefeed_uitpas_culturefeed_login_redirect_destination_alter(&$destination) {

  if (isset($_GET['isnewpassholder'])) {

    // We can't use the correct hook implementation here since UiTPAS doesn't
    // use a popup window and the the destination in culturefeed_oauth_authorize
    // (culturefeed.pages.inc) is set as 'window.opener...'
    // So we do a drupal_goto() instead.
    // $destination = 'registration_confirmation';
    drupal_goto('registration_confirmation');

  }

}
