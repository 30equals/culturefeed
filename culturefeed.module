<?php

define('CULTUREFEED_CACHE_DISABLED', 0);
define('CULTUREFEED_CACHE_ENABLED', 1);
define('CULTUREFEED_CACHE_EXPIRES', 3600);

function culturefeed_user_delete(Drupal\Core\Entity\EntityInterface $entity) {

  // Delete the culturefeed user if exist.
  $query = \Drupal::entityQuery('culturefeed_user')->condition('uid', $entity->id());
  $result = $query->execute();
  if (count($result)) {
    $culturefeed_user = entity_load('culturefeed_user', $entity->id());
    $uitid = $culturefeed_user->uitid->value;
    $culturefeed_user->delete();

    // Delete the tokens if the exist.
    $query = \Drupal::entityQuery('culturefeed_token')
      ->condition('uitid', $uitid);
    $result = $query->execute();
    entity_delete_multiple('culturefeed_token', array_keys($result));
  }

}
